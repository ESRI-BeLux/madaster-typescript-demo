"use strict";(self.webpackChunkmadaster_typescript=self.webpackChunkmadaster_typescript||[]).push([[7734],{69891:(t,e,n)=>{n.d(e,{N:()=>g,a:()=>S,b:()=>R,c:()=>T,d:()=>v,f:()=>m,g:()=>_,i:()=>M,n:()=>D,u:()=>O,w:()=>I}),n(6273);var r=n(80861),i=n(4506),o=n(25336),s=n(80347),c=n(19913),a=n(74772),u=n(76982),l=n(78115),f=n(60929),h=n(63918),p=n(74695),d=n(11631);const g=v();function v(){return(0,u.vt)()}const E=a.e,y=a.e;function T(t,e){return(0,a.c)(e,t)}function R(t,e){return(0,u.fA)(t[0],t[1],t[2],e)}function I(t){return t}function S(t){return t[3]}function _(t){return t}function m(t,e,n,r){return(0,u.fA)(t,e,n,r)}function x(t,e,n){if(null==e)return!1;if(!C(t,e,w))return!1;let{t0:r,t1:i}=w;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(n){const{origin:t,direction:i}=e;n[0]=t[0]+i[0]*r,n[1]=t[1]+i[1]*r,n[2]=t[2]+i[2]*r}return!0}const w={t0:0,t1:0};function C(t,e,n){const{origin:r,direction:i}=e,o=A;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===s)return!1;const c=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),a=c*c-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(a<0)return!1;const u=Math.sqrt(a);return n.t0=(-c-u)/(2*s),n.t1=(-c+u)/(2*s),!0}const A=(0,c.vt)();function M(t,e){return x(t,e,null)}function b(t,e,n){const r=d.rq.get(),i=d.Rc.get();(0,s.b)(r,e.origin,e.direction);const c=S(t);(0,s.b)(n,r,e.origin),(0,s.h)(n,n,1/(0,s.l)(n)*c);const a=P(t,e.origin),u=(0,p.g7)(e.origin,n);return(0,o.$0)(i,u+a,r),(0,s.e)(n,n,i),n}function N(t,e,n){const r=(0,s.f)(d.rq.get(),e,t),i=(0,s.h)(d.rq.get(),r,t[3]/(0,s.l)(r));return(0,s.g)(n,i,t)}function P(t,e){const n=(0,s.f)(d.rq.get(),e,t),r=(0,s.l)(n),o=S(t),c=o+Math.abs(o-r);return(0,i.XM)(o/c)}const q=(0,c.vt)();function k(t,e,n,r){const o=(0,s.f)(q,e,t);switch(n){case f._.X:{const t=(0,i.jU)(o,q)[2];return(0,s.s)(r,-Math.sin(t),Math.cos(t),0)}case f._.Y:{const t=(0,i.jU)(o,q),e=t[1],n=t[2],c=Math.sin(e);return(0,s.s)(r,-c*Math.cos(n),-c*Math.sin(n),Math.cos(e))}case f._.Z:return(0,s.n)(r,o);default:return}}function j(t,e){const n=(0,s.f)(U,e,t);return(0,s.l)(n)-t[3]}function D(t,e){const n=(0,s.a)(t,e),r=S(t);return n<=r*r}function O(t,e,n=(0,u.vt)()){const r=(0,s.p)(t,e),i=t[3],o=e[3];return r+o<i?((0,a.c)(n,t),n):r+i<o?((0,a.c)(n,e),n):((0,s.k)(n,t,e,(r+o-i)/(2*r)),n[3]=(r+i+o)/2,n)}const U=(0,c.vt)(),z=v();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:g,altitudeAt:j,angleToSilhouette:P,axisAt:k,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,e,n){return x(t,e,n)?n:((0,h.oC)(e,t,n),N(t,n,n))},closestPointOnSilhouette:b,containsPoint:D,copy:T,create:v,distanceToSilhouette:function(t,e){const n=(0,s.f)(d.rq.get(),e,t),r=(0,s.o)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n},equals:y,exactEquals:E,fromCenterAndRadius:R,fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},fromValues:m,getCenter:_,getRadius:S,intersectLine:function(t,e,n){const r=(0,h.Cr)(e,n);if(!C(t,r,w))return[];const{origin:i,direction:o}=r,{t0:a,t1:u}=w,f=e=>{const n=(0,c.vt)();return(0,s.q)(n,i,o,e),N(t,n,n)};return Math.abs(a-u)<(0,l.FD)()?[f(a)]:[f(a),f(u)]},intersectRay:x,intersectRayClosestSilhouette:function(t,e,n){if(x(t,e,n))return n;const r=b(t,e,d.rq.get());return(0,s.g)(n,e.origin,(0,s.h)(d.rq.get(),e.direction,(0,s.p)(e.origin,r)/(0,s.l)(e.direction))),n},intersectsRay:M,projectPoint:N,setAltitudeAt:function(t,e,n,r){const i=j(t,e),o=k(t,e,f._.Z,U),c=(0,s.h)(U,o,n-i);return(0,s.g)(r,e,c)},setExtent:function(t,e,n){return r.A.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t!==n&&T(t,n),n},tmpSphere:z,union:O,wrap:I},Symbol.toStringTag,{value:"Module"}))},82444:(t,e,n)=>{n.d(e,{I:()=>i});var r=n(71709);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},64159:(t,e,n)=>{n.d(e,{W:()=>c,g:()=>s});var r=n(19913),i=n(34561),o=n(88133);function s(t,e,n,r){if((0,i.canProjectWithoutEngine)(t.spatialReference,n)){a[0]=t.x,a[1]=t.y;const i=t.z;return a[2]=i??r??0,(0,o.projectBuffer)(a,t.spatialReference,0,e,n,0,1)}const s=(0,i.tryProjectWithZConversion)(t,n);return!!s&&(e[0]=s?.x,e[1]=s?.y,e[2]=s?.z??r??0,!0)}async function c(t,e,n,r,o){return await(0,i.initializeProjection)(t.spatialReference,n,null,o),s(t,e,n,r)}const a=(0,r.vt)()},42722:(t,e,n)=>{n.d(e,{F:()=>o}),n(34561);var r=n(44153),i=n(64159);function o(t,e,n,r,o){return!(null==e||null==r||t.length<2)&&(s.x=t[0],s.y=t[1],s.z=t[2],s.spatialReference=e,(0,i.g)(s,n,r,o))}const s=(0,n(82320).T)(0,0,0,r.A.WGS84)},63918:(t,e,n)=>{n.d(e,{C:()=>l,Cr:()=>f,LV:()=>u,kb:()=>h,oC:()=>p,vt:()=>c}),n(3223);var r=n(82444),i=n(80347),o=n(19913),s=n(11631);function c(t){return t?a((0,o.o8)(t.origin),(0,o.o8)(t.direction)):a((0,o.vt)(),(0,o.vt)())}function a(t,e){return{origin:t,direction:e}}function u(t,e){const n=d.get();return n.origin=t,n.direction=e,n}function l(t,e=c()){return function(t,e,n=c()){return(0,i.c)(n.origin,t),(0,i.c)(n.direction,e),n}(t.origin,t.direction,e)}function f(t,e,n=c()){return(0,i.c)(n.origin,t),(0,i.f)(n.direction,e,t),n}function h(t,e){const n=(0,i.b)(s.rq.get(),(0,i.n)(s.rq.get(),t.direction),(0,i.f)(s.rq.get(),e,t.origin));return(0,i.j)(n,n)}function p(t,e,n){const r=(0,i.j)(t.direction,(0,i.f)(n,e,t.origin));return(0,i.g)(n,t.origin,(0,i.h)(n,t.direction,r)),n}const d=new r.I((()=>c()))},82320:(t,e,n)=>{function r(t,e,n,r){return{x:t,y:e,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}n.d(e,{T:()=>r})},68695:(t,e,n)=>{n(26110),n(19913),n(34670),n(80788)},37734:(t,e,n)=>{n.d(e,{Dd:()=>_,II:()=>v,JA:()=>r,Q7:()=>w,Rm:()=>S,aM:()=>E,b$:()=>m,hB:()=>x,s1:()=>y}),n(3313);var r,i,o=n(38116),s=(n(3223),n(62991)),c=(n(6273),n(62088)),a=(n(25336),n(26110)),u=(n(80347),n(19913)),l=(n(34561),n(32159),n(42722),n(2532)),f=(n(69891),n(10591),n(16504)),h=(n(68695),n(118)),p=(n(96153),n(45506)),d=n(44153);function g(t){return t?parseInt(t.substring(t.lastIndexOf("/")+1,t.length),10):void 0}function v(t,e,n,i){n.traverse(e,(e=>{const n=e.serviceMbsInIndexSR;return(null!=n&&E(t,n))!==r.OUTSIDE&&(i(e),!0)}))}function E(t,e){const n=e[0],i=e[1],o=e[3],s=t[0]-n,c=n-t[2],a=t[1]-i,u=i-t[3],l=Math.max(s,c,0),f=Math.max(a,u,0),h=l*l+f*f;return h>o*o?r.OUTSIDE:h>0?r.INTERSECTS_CENTER_OUTSIDE:-Math.max(s,c,a,u)>o?r.INSIDE:r.INTERSECTS_CENTER_INSIDE}async function y(t,e,n,r,i,s,c,a){const u=[];for(const r of e)if(r&&i.includes(r.name)){const e=`${t}/nodes/${n}/attributes/${r.key}/0`;u.push({url:e,storageInfo:r})}const l=await Promise.allSettled(u.map((t=>(0,o.A)(t.url,{responseType:"array-buffer",query:{...c,token:s},signal:a?.signal}).then((e=>(0,f.m0)(t.storageInfo,e.data)))))),h=[];for(const t of r){const e={};for(let n=0;n<l.length;n++){const r=l[n];if("fulfilled"===r.status){const i=r.value;e[u[n].storageInfo.name]=I(i,t)}}h.push(e)}return h}(0,l.vt)(),(i=r||(r={}))[i.OUTSIDE=0]="OUTSIDE",i[i.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",i[i.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",i[i.INSIDE=3]="INSIDE";const T=-32768,R=-(2**31);function I(t,e){if(!t)return null;const n=t[e];return(0,c.IY)(t)?n===T?null:n:(0,c._G)(t)?n===R?null:n:n!=n?null:n}function S(t){const e=t.store,n=e.indexCRS||e.geographicCRS,r=void 0===n?e.indexWKT:void 0;if(r){if(!t.spatialReference)throw new s.A("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indexWKT in the scene layer store but no layer spatial reference",{});if(r!==t.spatialReference.wkt)throw new s.A("layerview:store-spatial-reference-wkt-index-incompatible","The indexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=n?new d.A(g(n)):t.spatialReference;return i.equals(t.spatialReference)?t.spatialReference:i}function _(t){const e=t.store,n=e.vertexCRS||e.projectedCRS,r=void 0===n?e.vertexWKT:void 0;if(r){if(!t.spatialReference)throw new s.A("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(r!==t.spatialReference.wkt)throw new s.A("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=n?new d.A(g(n)):t.spatialReference;return i.equals(t.spatialReference)?t.spatialReference:i}function m(t,e){return(0|t)+(0|e)|0}function x(t){return t[3]>=0}function w(t){null!=t&&(t[3]=-1)}(0,h.CC)({color:[0,0,0,0],opacity:0}),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,u.vt)(),(0,l.vt)(),(0,l.vt)(),new p.ab,(0,u.vt)(),new Array(72),(0,a.vt)()},118:(t,e,n)=>{n.d(e,{Cc:()=>a,CC:()=>u,RF:()=>c});var r=n(93814),i=(n(6273),n(23572)),o=n(76982),s=n(84989);function c(t){return t&&t.enabled&&("extrude"===t.type||function(t){return"fill"===t.type}(t))&&null!=t.edges}function a(t,e){return function(t,e){if(null==t)return null;const n=null!=t.color?(0,o.ci)(r.A.toUnitRGBA(t.color)):(0,o.fA)(0,0,0,0),s=(0,i.Lz)(t.size),c=(0,i.Lz)(t.extensionLength);switch(t.type){case"solid":return u({color:n,size:s,extensionLength:c,...e});case"sketch":return function(t){return{...f,...t,type:"sketch"}}({color:n,size:s,extensionLength:c,...e});default:return}}(function(t){return t&&t.enabled&&t.edges||null}(t),e)}function u(t){return{...l,...t,type:"solid"}}const l={color:(0,o.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1},f={color:(0,o.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1}},96153:(t,e,n)=>{n.d(e,{Eb:()=>s,_j:()=>c,k5:()=>r});var r,i,o=n(4506);function s(t){switch(t){case"multiply":default:return r.Multiply;case"ignore":return r.Ignore;case"replace":return r.Replace;case"tint":return r.Tint}}function c(t,e,n){if(null==t||e===r.Ignore)return n[0]=255,n[1]=255,n[2]=255,void(n[3]=255);const i=(0,o.qE)(Math.round(t[3]*u),0,u),s=0===i||e===r.Tint?0:e===r.Replace?l:f;n[0]=(0,o.qE)(Math.round(t[0]*a),0,a),n[1]=(0,o.qE)(Math.round(t[1]*a),0,a),n[2]=(0,o.qE)(Math.round(t[2]*a),0,a),n[3]=i+s}(i=r||(r={}))[i.Multiply=1]="Multiply",i[i.Ignore=2]="Ignore",i[i.Replace=3]="Replace",i[i.Tint=4]="Tint";const a=255,u=85,l=u,f=2*u},84989:(t,e,n)=>{var r;n.d(e,{x:()=>r}),function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(r||(r={}))}}]);